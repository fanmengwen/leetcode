/**
 * @param {number[]} nums
 * @return {number}
 * æŒ‰ä½è®¡ç®—:æ‰€æœ‰æ•°å­—çš„ç¬¬ 0 ä½ç›¸åŠ çš„æ€»å’Œï¼Œå¯¹ 3 å–ä½™æ•° (sum % 3)ï¼Œç»“æœä¸€å®šç­‰äºé‚£ä¸ªå”¯ä¸€æ•°å­—çš„ç¬¬ 0 ä½
 * åè¿›åˆ¶æ•´æ•°æœ‰ 32 ä½ï¼Œ æ‰€ä»¥æ¯ä¸€ä½éƒ½ç›¸åŠ ï¼Œ sum / 3 = åªå‡ºç°ä¸€æ¬¡çš„ä½æ•°
 */
var singleNumber = function (nums) {
  let ans = 0;
  // æ•´æ•°æœ‰ 32 ä½
  for (let i = 0; i < 32; i++) {
    let total = 0;
    for (let num of nums) {
      // num >> i :å°±æ˜¯æŠŠåŸæ¥åœ¨ç¬¬ i ä½çš„é‚£ä¸ªæ•°å­—ï¼Œæ­£å¥½ç§»åŠ¨åˆ°ç¬¬ 0 ä½ï¼ˆä¹Ÿå°±æ˜¯æœ€å³è¾¹ï¼‰çš„ä½ç½®ä¸Š
      // & 1 ï¼Œ åªå–å¾—æœ€åä¸€ä½ç›¸åŠ 
      total += (num >> i) & 1;
    }
    // å¦‚æœæ€»å’Œä¸æ˜¯ 3 çš„å€æ•°ï¼Œè¯´æ˜ç›®æ ‡æ•°å­—åœ¨è¿™ä¸€ä½ä¸Šæ˜¯ 1
    if (total % 3 !== 0) {
      // 1 << i ç›¸å½“äºæŠŠ 1 å·¦ç§» i ,æ¯”å¦‚ 100.
      // | æˆ–è¿ç®—ï¼Œ100 | 001 = 101ï¼Œ ç›¸å½“äºä½æ•°å˜æˆ 1
      // æ‰€ä»¥ è¿™é‡Œ | (æˆ–) è¿ç®—æ¥ç»™ ans çš„ç¬¬ i ä½èµ‹å€¼ä¸º 1ã€‚å…¶ä»–ä½ç½®ä¸å˜
      ans |= 1 << i;
    }
  }
  // æµè§ˆå™¨é»˜è®¤è½¬æ¢æˆåè¿›åˆ¶
  return ans;
};
console.log("ğŸš€ ~ singleNumber ~ singleNumber:", singleNumber([2, 2, 4, 2]));
